<!DOCTYPE html>
<title>Paistilan Padel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/static/style.css">

<body>
    <div class="header">
        <h1>Paistilan Padel</h1>
    </div>

{% if session.user_id %}

<div>{{ name_error }}</div>
<form action="/addplayer" method="POST" class="playeradd" onsubmit="checkplayer(this)">
    <div>Lisää pelaaja: <input type="text" name="add_player" minlength="4" maxlength="10" required> </div>
    <div><input type="submit" value="Tallenna"></div>
    <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
</form>

<script>
    function checkplayer(form) {
        if (form.player.value.length > 3 && form.player.value.length < 11) {
            return true
        }
        
        else {
            alert("Nimen pituus pitää olla 4-10 kirjainta");
            return false;
        }
    }
</script>

<div><h2>Valitse päivän pelaajat (vähintään 4)</h2></div>

<form action="/games" method="POST" onsubmit="check(this)">
    <div class="playerboard">
        {% for p in players %}
        <label class="playerbox">{{ p[0] }}<input type="checkbox" id="player" name="player" value="{{ p[0] }}"></label>
        {% endfor %} 
    </div>
    <div class="rounds">
        Kierrosten lukumäärä<select id="roundwheel" name="roundvalue">
                            <option value="1" selected> 1
                            <option value="2"> 2
                            <option value="3"> 3       
                            </select>    
    </div>
    <div class="scorebutton">
        <input id= "gamestart" type="submit" value="Aloita pelit">
        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
    </div>
         
</form>

<script>
    function check(form) {
    var checked = 0;
    var chks = document.getElementsByTagName("input");
    for (var i = 0; i < chks.length; i++) {
        if (chks[i].checked) {
            checked++;
        }
    }
    if (checked > 3) {
        return true;
    }   
    else {
        alert("Valitse vähintään 4 pelaajaa");
        return false;
    }
}
</script>

<div><h2>KAUSITILASTO</h2></div>

<div class="podiumboard">
    {% for p in podium %}
        <div class = "name"> {{ p[0] }}</div>
        <div class = "points"> {{ p[1] }}</div>
    {% endfor %}   
</div>
<nav><h2><a href="/logout">Kirjaudu ulos</a></h2></nav>

{% else %}

<p>{{ message }}</p><br>
<div class="login">
    <form action="/login" method="post">
        <label for="username">Tunnus:</label>
        <input type="text" id = "username" name="username" placeholder="Syötä tunnus" required>
        <label for="password">Salasana:</label>
        <input type="password" name="password" placeholder="Syötä salasana" required>
        <input id=button type="submit" value="Kirjaudu">
    </form>
</div>
<nav><h2><a href="/register"> rekisteröidy</a></h2></nav>

{% endif %}

<body>